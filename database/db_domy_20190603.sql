-- phpMyAdmin SQL Dump
-- version 4.8.0.1
-- https://www.phpmyadmin.net/
--
-- Хост: 127.0.0.1
-- Время создания: Мар 06 2019 г., 20:36
-- Версия сервера: 10.1.32-MariaDB
-- Версия PHP: 7.2.5

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- База данных: `db_domy`
--

DELIMITER $$
--
-- Процедуры
--
CREATE DEFINER=``@`localhost` PROCEDURE `getAll` (IN `P_ID_TREE` INTEGER)  SQL SECURITY INVOKER
BEGIN
	select * from SPR_QUESTION_TREE join SPR_QUESTION on SPR_QUESTION_TREE.ID_PARENT = SPR_QUESTION.ID
    where SPR_QUESTION_TREE.ID_TREE = P_ID_TREE;
END$$

CREATE DEFINER=``@`localhost` PROCEDURE `getAnswer` (IN `P_ID_TREE` INTEGER, IN `P_ID_Q` INTEGER)  SQL SECURITY INVOKER
    COMMENT '???????? ??????? ?? ???.??????'
BEGIN

	select SPR_ANSWER.ID as id_answer,
           SPR_ANSWER.ANSWER as answer,
           SPR_ANSWER.INFO as info,
           SPR_ANSWER_QUESTION.IS_HAVE_COMMENT as is_have_comment,
           SPR_ANSWER_QUESTION.IS_MUST_COMMENT as is_must_comment,
           SPR_ANSWER_QUESTION.IS_HAVE_SCALE as is_have_scale,
           SPR_ANSWER_QUESTION.SCALE_MIN     as scale_min,
           SPR_ANSWER_QUESTION.SCALE_MAX     as scale_max,
           SPR_ANSWER_QUESTION.SCALE_STEP    as scale_step,
           SPR_ANSWER_QUESTION.SHOW_INDEX    as show_index,
           SPR_ANSWER_QUESTION.IS_TRUE       as is_true,
           SPR_ANSWER_QUESTION.IS_TRUE_COMMENT  as is_true_comment
			           
           # SPR_QUESTION_TREE.ID_CHILD        as id_child 
                      
    from   SPR_ANSWER_QUESTION join SPR_ANSWER on SPR_ANSWER_QUESTION.ID_ANSWER = SPR_ANSWER.ID
           left join SPR_QUESTION_TREE on   SPR_QUESTION_TREE.ID_PARENT = SPR_ANSWER_QUESTION.ID_QUESTION and
           									SPR_QUESTION_TREE.ID_ASWER_BRANCH = SPR_ANSWER_QUESTION.ID_ANSWER and
                                            SPR_QUESTION_TREE.ID_TREE = P_ID_TREE 
           
    where  SPR_ANSWER_QUESTION.ID_QUESTION = P_ID_Q
           
    order by 
    	   SPR_ANSWER_QUESTION.SHOW_INDEX;
    
END$$

CREATE DEFINER=``@`localhost` PROCEDURE `getQuestion` (IN `P_ID_TREE` INT, IN `P_ID_Q` INT, IN `P_ID_A` INT)  SQL SECURITY INVOKER
    COMMENT 'get_question(id ??????? ???.??????, id ?????????? ??????, id ??????)'
BEGIN

	select SPR_QUESTION.ID as id_parent,
           SPR_QUESTION.QUESTION as question,
           SPR_QUESTION.INFO as info,
           SPR_QUESTION.IS_MULTI_ANSWER as is_multi_aswer,
           SPR_QUESTION.IS_MUST_HAVE_ANSWER as is_must_have_answer,
           SPR_QUESTION.ID_LEVEL as id_level
    from SPR_QUESTION_TREE join SPR_QUESTION on SPR_QUESTION_TREE.ID_CHILD = SPR_QUESTION.ID
    where COALESCE(SPR_QUESTION_TREE.ID_PARENT, 0) = COALESCE(P_ID_Q, 0) and
          ( COALESCE(SPR_QUESTION_TREE.ID_ASWER_BRANCH, 0)=0 or
            COALESCE(SPR_QUESTION_TREE.ID_ASWER_BRANCH, 0) = COALESCE(P_ID_A, 0) ) and
          SPR_QUESTION_TREE.ID_TREE = P_ID_TREE;
          
    
END$$

CREATE DEFINER=``@`localhost` PROCEDURE `getQuestionsCount` (IN `p_id_tree` INT, IN `p_id_level` INT)  SQL SECURITY INVOKER
BEGIN
  select count(*) as questions_count 
  from SPR_QUESTION_TREE join SPR_QUESTION on SPR_QUESTION_TREE.ID_CHILD = SPR_QUESTION.ID
  where SPR_QUESTION_TREE.ID_TREE = p_id_tree and (SPR_QUESTION.ID_LEVEL = p_id_level or p_id_level is null);
END$$

CREATE DEFINER=``@`localhost` PROCEDURE `putAnswer` (IN `P_ID_USER` INTEGER, IN `P_ID_QUESTION` INTEGER, IN `P_ID_ANSWER` INTEGER, IN `P_INFO` VARCHAR(1024), IN `P_SCALE_VALUE` FLOAT)  MODIFIES SQL DATA
    SQL SECURITY INVOKER
BEGIN

  insert into usr_answer(id_user, id_question, id_answer, info, scale_value) values 
  (P_ID_USER, P_ID_QUESTION, P_ID_ANSWER, P_INFO, P_SCALE_VALUE);
  
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Структура таблицы `spr_answer`
--

CREATE TABLE `spr_answer` (
  `ID` int(11) NOT NULL,
  `ID_GROUP` int(11) NOT NULL,
  `ANSWER` varchar(1024) NOT NULL,
  `INFO` varchar(1024) DEFAULT NULL COMMENT 'доп.инфо к ответу',
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_answer`
--

INSERT INTO `spr_answer` (`ID`, `ID_GROUP`, `ANSWER`, `INFO`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 1, 'район', NULL, '2019-01-16 23:48:24', '0000-00-00 00:00:00'),
(2, 1, 'цена', NULL, '2019-01-16 23:48:34', '0000-00-00 00:00:00'),
(3, 1, 'наличие объектов инфраструктуры (школ, больниц, садов)', NULL, '2019-01-16 23:49:04', '0000-00-00 00:00:00'),
(4, 1, 'экология', NULL, '2019-01-16 23:49:44', '2019-01-17 00:02:17'),
(5, 1, 'да', NULL, '2019-01-17 00:07:24', NULL),
(6, 1, 'нет', NULL, '2019-01-17 00:07:37', NULL),
(7, 1, '5-7 млн', NULL, '2019-01-17 00:15:33', NULL),
(8, 1, '7-10 млн', NULL, '2019-01-17 00:15:52', NULL),
(9, 1, '10-15 млн', NULL, '2019-01-17 00:16:10', NULL),
(10, 1, '15-20 млн', NULL, '2019-01-17 00:16:24', NULL),
(11, 1, 'от 20 млн', NULL, '2019-01-17 00:16:43', NULL),
(12, 1, 'да, это освободит меня от \"бумажных\" хлопот и снимет риски', NULL, '2019-01-17 22:50:15', NULL),
(13, 1, 'нет, я подкован и в состоянии самостоятельно совершить сделку', NULL, '2019-01-17 22:50:37', NULL),
(14, 1, 'до 1 месяца', NULL, '2019-01-17 22:51:37', NULL),
(15, 1, '1-3 месяца', NULL, '2019-01-17 22:51:57', NULL),
(16, 1, '3-6 месяцев', NULL, '2019-01-17 22:52:26', NULL),
(17, 1, 'от полугода до года', NULL, '2019-01-17 22:52:36', NULL),
(18, 1, 'свыше года', NULL, '2019-01-17 22:53:00', NULL),
(19, 1, 'введите ответ', NULL, '2019-01-17 22:57:42', NULL),
(20, 1, 'менее месяца', NULL, '2019-02-11 23:10:40', NULL),
(21, 1, 'месяц', NULL, '2019-02-11 23:12:36', NULL),
(22, 1, 'более месяца', NULL, '2019-02-11 23:14:24', NULL),
(23, 1, 'Да, это действительно может оказаться так', NULL, '2019-02-11 23:37:00', NULL),
(24, 1, 'Конечно, нет', NULL, '2019-02-11 23:37:16', NULL),
(25, 1, 'Честно говоря, забываю', NULL, '2019-02-11 23:41:34', NULL),
(26, 1, 'Всегда стараюсь заглянуть в каждый угол', NULL, '2019-02-11 23:41:49', NULL),
(27, 1, 'вторичка лучше', NULL, '2019-02-11 23:43:52', NULL),
(28, 1, 'новостройка', NULL, '2019-02-11 23:44:05', NULL),
(29, 1, 'однаково', NULL, '2019-02-11 23:44:14', NULL),
(30, 1, 'в одиночку', NULL, '2019-02-18 00:27:03', NULL),
(31, 1, 'с другом', NULL, '2019-02-18 00:27:03', NULL),
(32, 1, 'в одиночку', NULL, '2019-02-18 00:35:53', NULL),
(33, 1, 'с другом', NULL, '2019-02-18 00:35:54', NULL),
(34, 1, 'Нет, имидж с квартирой никак не связан', NULL, '2019-02-18 00:35:54', NULL),
(35, 1, 'Нет (а что надо было?)', NULL, '2019-02-18 00:35:54', NULL),
(36, 1, 'утро', NULL, '2019-02-18 00:35:54', NULL),
(37, 1, 'день', NULL, '2019-02-18 00:35:54', NULL),
(38, 1, 'вечер', NULL, '2019-02-18 00:35:54', NULL),
(39, 1, 'не знаю', NULL, '2019-02-18 00:35:54', NULL),
(40, 1, 'северная', NULL, '2019-02-18 00:35:54', NULL),
(41, 1, 'южная', NULL, '2019-02-18 00:35:54', NULL),
(42, 1, 'западная', NULL, '2019-02-18 00:35:54', NULL),
(43, 1, 'восточная', NULL, '2019-02-18 00:35:54', NULL),
(44, 1, 'конечно, характеристики', NULL, '2019-02-18 00:35:54', NULL),
(45, 1, 'эмоции (вдруг угадаю) ', NULL, '2019-02-18 00:35:55', NULL),
(46, 1, 'Нет, я вообще не проверяю никакой короб, вы что?', NULL, '2019-02-18 00:35:55', NULL),
(47, 1, '270-278', NULL, '2019-02-18 00:35:55', NULL),
(48, 1, '278-290', NULL, '2019-02-18 00:35:55', NULL),
(49, 1, 'более 290', NULL, '2019-02-18 00:35:55', NULL),
(50, 1, 'без отделки панель', NULL, '2019-02-18 00:35:55', NULL),
(51, 1, 'без отделки кирпич', NULL, '2019-02-18 00:35:55', NULL),
(52, 1, 'отделкой фасада штукатуркой (или мокрые фасады)', NULL, '2019-02-18 00:35:55', NULL),
(53, 1, 'керамогранит', NULL, '2019-02-18 00:35:55', NULL),
(54, 1, '1-4', NULL, '2019-02-18 00:35:55', NULL),
(55, 1, '4-7', NULL, '2019-02-18 00:35:55', NULL),
(56, 1, '7-15', NULL, '2019-02-18 00:35:55', NULL),
(57, 1, 'от 15 и выше', NULL, '2019-02-18 00:35:55', NULL),
(58, 1, 'Небольшая', NULL, '2019-02-18 00:35:55', NULL),
(59, 1, 'Лучше свободные метры', NULL, '2019-02-18 00:35:55', NULL),
(60, 1, 'от 1 до 4 месяцев', NULL, '2019-02-18 00:35:55', NULL),
(61, 1, 'от 4 месяцев до года', NULL, '2019-02-18 00:35:55', NULL),
(62, 1, '10-15%', NULL, '2019-02-18 00:35:55', NULL),
(63, 1, '25-35%', NULL, '2019-02-18 00:35:55', NULL),
(64, 1, '35-40%', NULL, '2019-02-18 00:35:55', NULL),
(65, 1, 'Транспорт', NULL, '2019-02-18 00:35:55', NULL),
(66, 1, 'ТЭЦ', NULL, '2019-02-18 00:35:55', NULL),
(67, 1, 'Северо-Западе', NULL, '2019-02-18 00:35:55', NULL),
(68, 1, 'Юго-западе', NULL, '2019-02-18 00:35:56', NULL),
(69, 1, 'Юго-Востоке', NULL, '2019-02-18 00:35:56', NULL),
(70, 1, 'Северо-Востоке', NULL, '2019-02-18 00:35:56', NULL),
(71, 1, 'на 5-10%', NULL, '2019-02-18 00:35:56', NULL),
(72, 1, 'на 10-12%', NULL, '2019-02-18 00:35:56', NULL),
(73, 1, 'на 0%', NULL, '2019-02-18 00:35:56', NULL),
(74, 1, 'на 1-5%', NULL, '2019-02-18 00:35:56', NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `spr_answer_group`
--

CREATE TABLE `spr_answer_group` (
  `ID` int(11) NOT NULL,
  `GROUP_NAME` varchar(256) NOT NULL,
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_answer_group`
--

INSERT INTO `spr_answer_group` (`ID`, `GROUP_NAME`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 'Общие', '2019-01-16 22:49:13', '0000-00-00 00:00:00');

-- --------------------------------------------------------

--
-- Структура таблицы `spr_answer_question`
--

CREATE TABLE `spr_answer_question` (
  `ID_QUESTION` int(11) NOT NULL,
  `ID_ANSWER` int(11) NOT NULL,
  `IS_HAVE_COMMENT` smallint(6) NOT NULL DEFAULT '0' COMMENT 'есть комментарий',
  `IS_MUST_COMMENT` smallint(6) NOT NULL DEFAULT '0' COMMENT 'комментарий обязателен для заполнения',
  `IS_HAVE_SCALE` smallint(6) DEFAULT '0' COMMENT 'есть шкала оценки',
  `SCALE_MIN` smallint(6) DEFAULT NULL COMMENT 'минимальное значение шкалы',
  `SCALE_MAX` smallint(6) DEFAULT NULL COMMENT 'максимальное значение',
  `SCALE_STEP` float DEFAULT NULL COMMENT 'шаг изменения шкалы (0-произволное, null-не задано)',
  `SHOW_INDEX` smallint(6) DEFAULT NULL COMMENT 'порядок сортировки при визуалке',
  `IS_TRUE` tinyint(4) DEFAULT NULL COMMENT 'признак правильного ответа',
  `IS_TRUE_COMMENT` varchar(1024) DEFAULT NULL COMMENT 'пояснение к правильному ответу',
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_answer_question`
--

INSERT INTO `spr_answer_question` (`ID_QUESTION`, `ID_ANSWER`, `IS_HAVE_COMMENT`, `IS_MUST_COMMENT`, `IS_HAVE_SCALE`, `SCALE_MIN`, `SCALE_MAX`, `SCALE_STEP`, `SHOW_INDEX`, `IS_TRUE`, `IS_TRUE_COMMENT`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 1, 0, 0, 1, 1, 10, NULL, 1, 1, NULL, '2019-01-17 00:03:04', '2019-03-03 10:35:51'),
(1, 2, 0, 0, 1, 1, 10, NULL, 2, 1, NULL, '2019-01-17 00:03:32', '2019-03-03 10:31:34'),
(1, 3, 0, 0, 1, 1, 10, NULL, 3, 1, 'Потому что ты гений', '2019-01-17 00:04:05', '2019-03-03 10:29:42'),
(1, 4, 0, 0, 1, 1, 10, NULL, 4, 1, NULL, '2019-01-17 00:04:27', '2019-03-03 10:35:48'),
(2, 5, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-17 00:11:54', '2019-01-17 00:14:06'),
(2, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений.', '2019-01-17 00:12:16', '2019-03-03 10:37:16'),
(3, 7, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-17 00:17:26', '2019-01-17 00:18:11'),
(3, 8, 0, 0, 0, NULL, NULL, NULL, 2, NULL, NULL, '2019-01-17 00:17:33', '2019-01-17 00:18:13'),
(3, 9, 0, 0, 0, NULL, NULL, NULL, 3, NULL, NULL, '2019-01-17 00:17:43', '2019-01-17 00:18:16'),
(3, 10, 0, 0, 0, NULL, NULL, NULL, 4, NULL, NULL, '2019-01-17 00:17:52', '2019-01-17 00:18:17'),
(3, 11, 0, 0, 0, NULL, NULL, NULL, 5, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений.', '2019-01-17 00:17:58', '2019-03-03 10:37:36'),
(4, 5, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-17 00:25:25', '2019-01-17 00:25:52'),
(4, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений.', '2019-01-17 00:25:45', '2019-03-03 10:37:48'),
(5, 12, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-17 22:50:57', NULL),
(5, 13, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений.', '2019-01-17 22:51:11', '2019-03-03 10:37:58'),
(6, 14, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-17 22:53:27', '2019-01-17 22:54:18'),
(6, 15, 0, 0, 0, NULL, NULL, NULL, 2, NULL, NULL, '2019-01-17 22:53:37', '2019-01-17 22:54:20'),
(6, 16, 0, 0, 0, NULL, NULL, NULL, 3, NULL, NULL, '2019-01-17 22:53:48', '2019-01-17 22:54:21'),
(6, 17, 0, 0, 0, NULL, NULL, NULL, 4, NULL, NULL, '2019-01-17 22:54:04', '2019-01-17 22:54:22'),
(6, 18, 0, 0, 0, NULL, NULL, NULL, 5, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений.', '2019-01-17 22:54:10', '2019-03-03 10:38:11'),
(7, 19, 1, 0, 0, NULL, NULL, NULL, NULL, 1, 'Здесь мы  должны давать пояснения, вот оно - вы гений и меткий стрелок.', '2019-01-17 22:57:52', '2019-03-03 10:39:36'),
(8, 5, 1, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-01-22 22:47:01', '2019-01-22 22:49:24'),
(8, 6, 1, 0, 0, NULL, NULL, NULL, 2, NULL, NULL, '2019-01-22 22:48:13', '2019-01-22 22:49:26'),
(9, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:11', NULL),
(9, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:22', NULL),
(10, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:30', NULL),
(10, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:36', NULL),
(11, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:42', NULL),
(11, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:48', NULL),
(12, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:16:54', NULL),
(12, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:04', NULL),
(13, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:09', NULL),
(13, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:15', NULL),
(14, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:21', NULL),
(14, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:26', NULL),
(15, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:31', NULL),
(15, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:36', NULL),
(16, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:45', NULL),
(16, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:51', NULL),
(17, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:17:57', NULL),
(17, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:18:03', NULL),
(18, 5, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:18:08', NULL),
(18, 6, 0, 0, 0, NULL, NULL, NULL, NULL, NULL, NULL, '2019-01-26 23:18:12', NULL),
(19, 20, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-02-11 23:12:48', '2019-02-11 23:14:46'),
(19, 21, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Чем больше времени, тем сложнее выбрать. Профессионалы говорят так: не поторопишься - квартиру упустишь, поторопишься - приобретешь плохую. Оптимальный срок - 1 месяц.', '2019-02-11 23:12:59', '2019-02-11 23:21:16'),
(19, 22, 0, 0, 0, NULL, NULL, NULL, 3, NULL, NULL, '2019-02-11 23:14:35', '2019-02-11 23:14:50'),
(20, 23, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-02-11 23:37:49', '2019-02-11 23:38:08'),
(20, 24, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Лучше не стоит, такие объявления требуют особо пристального внимания. Квартира не может стоить более чем на 15 процентов \"дешевле рынка\". Никогда не смотрите объявления из разряда \"Живу в Европе, а тут осталась квартира, и она не нужна\"', '2019-02-11 23:38:06', '2019-02-11 23:38:37'),
(21, 5, 0, 0, 0, NULL, NULL, NULL, 1, NULL, 'Ответ очевиден. Обращать внимание стоит. Шум может стать источником дискомфорта', '2019-02-11 23:39:50', '2019-02-11 23:40:32'),
(21, 6, 0, 0, 0, NULL, NULL, NULL, 2, NULL, NULL, '2019-02-11 23:39:55', '2019-02-11 23:40:03'),
(22, 25, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-02-11 23:42:05', '2019-02-11 23:42:18'),
(22, 26, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Вывести плесень можно только путем создания таких условий, при которых вы сами сбежите из своей квартиры. Осматривать обязательно!', '2019-02-11 23:42:12', '2019-02-11 23:42:56'),
(23, 27, 0, 0, 0, NULL, NULL, NULL, 1, NULL, NULL, '2019-02-11 23:45:15', '2019-02-11 23:45:42'),
(23, 28, 0, 0, 0, NULL, NULL, NULL, 2, NULL, NULL, '2019-02-11 23:45:23', '2019-02-11 23:45:44'),
(23, 29, 0, 0, 0, NULL, NULL, NULL, 3, 1, 'В зависимости от конкретного примера, но, в среднем, если дом сделан с учетом всех нормативов, то качество вторички ничуть не уступает современным новостройкам. Поэтому можно сказать, что качество плюс-минус одно и то же', '2019-02-11 23:45:38', '2019-02-11 23:46:07'),
(24, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Лучше это делать, даже если пока авто у вас нет. Сегодня нет, завтра есть.', '2019-02-18 00:48:52', '2019-02-18 00:49:32'),
(24, 6, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 00:48:53', '2019-02-18 00:49:35'),
(25, 30, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 00:54:52', NULL),
(25, 31, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Есть смысл взять на осмотр недвижимости стороннего наблюдателя, которому не придется в ней жить. Он сможет объективнее оценить плюсы и минусы квартиры и дома.', '2019-02-18 00:54:52', NULL),
(26, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'да, это его продолжение и неотъемлемая часть, которая во многом выбирается бессознательно', '2019-02-18 01:05:07', NULL),
(26, 34, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:07', NULL),
(27, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Стоит обращать внимание. Если дом окружает ветхий фонд или проекты новых строек, район превратится в сплошной шум.', '2019-02-18 01:05:07', NULL),
(27, 35, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:07', NULL),
(28, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:07', NULL),
(28, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Если квартира в собственности была менее года, это говорит о том, что, скорее всего, перед вами перекупщик, который мог замаскировать что-то ремонтом. Если же квартира в собственности всего несколько месяцев и сразу продается, то это должно насторожить.', '2019-02-18 01:05:07', NULL),
(29, 36, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:07', NULL),
(29, 37, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Осмотр квартиры целесообразно проводить в дневное время суток, чтобы увидеть все внешние мелкие недостатки и особенности ремонта жилого помещения', '2019-02-18 01:05:08', NULL),
(29, 38, 0, 0, 0, NULL, NULL, NULL, 3, 0, '', '2019-02-18 01:05:08', NULL),
(30, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Обязательно. Чтобы была полная прозрачность и гарантия юридической чистоты.', '2019-02-18 01:05:08', NULL),
(30, 6, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:08', NULL),
(30, 39, 0, 0, 0, NULL, NULL, NULL, 3, 0, '', '2019-02-18 01:05:08', NULL),
(31, 40, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Правильный ответ - северная. Она наиболее темная, следовательно, также и холодная. Если такие помещения есть в доме, то нужно уделить как можно больше времени и внимания их искусственному освещению, утеплению и отдать предпочтение отделке в светлых тонах', '2019-02-18 01:05:08', NULL),
(31, 41, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:08', NULL),
(31, 42, 0, 0, 0, NULL, NULL, NULL, 3, 0, '', '2019-02-18 01:05:08', NULL),
(31, 43, 0, 0, 0, NULL, NULL, NULL, 4, 0, '', '2019-02-18 01:05:08', NULL),
(32, 44, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:08', NULL),
(32, 45, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Исследователи доказали, что в большинстве случаев в 2 раза большую роль играют именно эмоции - нравится/не нравится.', '2019-02-18 01:05:08', NULL),
(33, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Спичкой или листком. Просто поднесите их к отверстию и увидите, насколько хорошо работает тяга. От этого будет зависеть весь воздухообмен в квартире.', '2019-02-18 01:05:08', NULL),
(33, 46, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:08', NULL),
(34, 47, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:08', NULL),
(34, 48, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:08', NULL),
(34, 49, 0, 0, 0, NULL, NULL, NULL, 3, 1, 'Самой хорошей считается высота от 290 см. Доказано, что чем выше высота потолка, тем психологически свободнее чувствуют себя хозяева и гости и лучше воздухообмен', '2019-02-18 01:05:08', NULL),
(35, 50, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:08', NULL),
(35, 51, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:08', NULL),
(35, 52, 0, 0, 0, NULL, NULL, NULL, 3, 1, 'Жилой дом с наружной отделкой фасада штукатуркой (любые типы мокрых фасадов) — это очень плохо. Через три года дом покрывается трещинами, штукатурка опадает (в месте перекрытий) из-за деформации-проседания конструкции дома, появляются серые подтеки на фасаде, пыль и грязь от ближайших автодорог ложится на штукатурку замечательным тёмным слоем.', '2019-02-18 01:05:08', NULL),
(35, 53, 0, 0, 0, NULL, NULL, NULL, 4, 0, '', '2019-02-18 01:05:08', NULL),
(36, 54, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:08', NULL),
(36, 55, 0, 0, 0, NULL, NULL, NULL, 2, 1, '4-7 это наиболее удобный вариант, автомобильных шумов почти не слышно, из окон открывается достаточно хороший вид, а проблемы в виде поломки лифта или отключения электричества хозяевам таких квартир не страшны, поскольку добраться достаточно просто и пешком', '2019-02-18 01:05:08', NULL),
(36, 56, 0, 0, 0, NULL, NULL, NULL, 3, 0, '', '2019-02-18 01:05:08', NULL),
(36, 57, 0, 0, 0, NULL, NULL, NULL, 4, 0, '', '2019-02-18 01:05:08', NULL),
(37, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(37, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Для того, чтобы понять, есть ли в приобретаемой квартире перепланировка, достаточно сравнить план БТИ с первоначальной планировкой квартиры и текущую планировку квартиры.  Если она один-в-один соответствует плану БТИ, то в данной квартире нет перепланировки.', '2019-02-18 01:05:09', NULL),
(38, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(38, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Они не могут получить в ней долю, не могут отобрать ее у собственника. Зарегистрированный гражданин не имеет никаких прав на собственность в данной квартире. Если он отказывается выписаться самостоятельно, то собственник имеет право обратиться в суд. Кроме того, в настоящее время трудоспособного человека можно выписать просто по желанию собственника. Надо заметить, что выписывать несовершеннолетнего ребенка, если нет информации о его будущей регистрации, ни в коем случае нельзя.', '2019-02-18 01:05:09', NULL),
(39, 58, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(39, 59, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Планировка должна быть функциональной и гибкой. Под функциональностью зонирования имеется в виду, что в квартире должна быть соблюдена логика перемещения (рядом со спальней есть ванная, гостиная находится по соседству с кухней и т. п.), сохранена удобная геометрия комнат, продумана расстановка мебели и техники, учтено естественное освещение и все тонкости инженерных коммуникаций.', '2019-02-18 01:05:09', NULL),
(40, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Да, на это может рассчитывать покупатель', '2019-02-18 01:05:09', NULL),
(40, 6, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:09', NULL),
(41, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(41, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Лучше не рисковать, такое жилье не ликвидное, дом стоял и мок 10 лет, грибок, плесень, вода в подвалах, и наверняка достроили тяп-ляп. Бетон стоял под открытым небом, арматура ржавела, соединительные конструкции - тоже. Если это монолит - это еще полбеды. А если панель - может сложиться однажды, как карточный домик.', '2019-02-18 01:05:09', NULL),
(42, 60, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'В каждом случае - индивидуально', '2019-02-18 01:05:09', NULL),
(42, 61, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'В каждом случае - индивидуально', '2019-02-18 01:05:09', NULL),
(43, 62, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(43, 63, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Цена на старте продаж составляет порядка 75% от окончательной цены. Можно сказать, что цена на новостройку за период строительства вырастет примерно на 33% (1/0.75=1.33).', '2019-02-18 01:05:09', NULL),
(43, 64, 0, 0, 0, NULL, NULL, NULL, 3, 0, '', '2019-02-18 01:05:09', NULL),
(44, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(44, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'Нет. Согласно СанПиН 2.2.1/2.1.1.1200-03 “Санитарно-защитные зоны и санитарная классификация предприятий, сооружений и иных объектов”, ТЭЦ и районные котельные тепловой мощностью 200 Гкал и выше, работающие на угольном и мазутном топливе, относятся ко второму классу опасности с СЗЗ не менее 500 м, работающие на газовом и газомазутном топливе (последний – как резервный), относятся к предприятиям третьего класса с СЗЗ не менее 300 м.', '2019-02-18 01:05:09', NULL),
(45, 65, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Наиболее значимый фактор — автомобили: они ответственны за 92 % всех выбросов, остальные 8 % — выбросы стационарных источников: промышленных предприятий, ТЭК, очистных сооружений и так далее.', '2019-02-18 01:05:09', NULL),
(45, 66, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:09', NULL),
(46, 67, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:09', NULL),
(46, 68, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:09', NULL),
(46, 69, 0, 0, 0, NULL, NULL, NULL, 3, 1, 'Больше всего производств — около 24 % — расположено на юго-востоке города.', '2019-02-18 01:05:09', NULL),
(46, 70, 0, 0, 0, NULL, NULL, NULL, 4, 0, '', '2019-02-18 01:05:09', NULL),
(47, 5, 0, 0, 0, NULL, NULL, NULL, 1, 1, 'Надо разделять понятия «свалка» и «полигон ТБО»: свалки — это все-таки несанкционированные места складирования отходов, полигоны — официальные. Официально в Москве полигонов ТБО нет: у города заключен договор с Московской областью, и все ТБО свозятся на полигоны в области.', '2019-02-18 01:05:09', NULL),
(47, 6, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:10', NULL),
(48, 5, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:10', NULL),
(48, 6, 0, 0, 0, NULL, NULL, NULL, 2, 1, 'в Москве с этим как раз порядок. Качество воды соответствует нормативам во всех районах и везде более-менее одинаковое. Кроме того, существуют недорогие фильтры для дополнительной очистки, хотя зачастую большой необходимости в них нет.', '2019-02-18 01:05:10', NULL),
(49, 71, 0, 0, 0, NULL, NULL, NULL, 1, 0, '', '2019-02-18 01:05:10', NULL),
(49, 72, 0, 0, 0, NULL, NULL, NULL, 2, 0, '', '2019-02-18 01:05:10', NULL),
(49, 73, 0, 0, 0, NULL, NULL, NULL, 3, 1, 'Правильный ответ: Экология не является ключевым фактором, который влияет на цену недвижимости: ЦАО, несмотря на транспортную загруженность, все-таки самый дорогой. Поэтому на 0%.', '2019-02-18 01:05:10', NULL),
(49, 74, 0, 0, 0, NULL, NULL, NULL, 4, 0, '', '2019-02-18 01:05:10', NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `spr_question`
--

CREATE TABLE `spr_question` (
  `ID` int(11) NOT NULL,
  `ID_GROUP` int(11) NOT NULL,
  `QUESTION` varchar(2000) NOT NULL,
  `INFO` varchar(1024) DEFAULT NULL COMMENT 'доп.инфо к вопросу',
  `IS_MUST_HAVE_ANSWER` smallint(6) NOT NULL DEFAULT '0' COMMENT 'обязательный ответ',
  `IS_MULTI_ANSWER` smallint(6) NOT NULL DEFAULT '0' COMMENT 'множественный ответ',
  `ID_LEVEL` smallint(6) DEFAULT '0' COMMENT 'уровень сложности',
  `DT_INSERT` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_question`
--

INSERT INTO `spr_question` (`ID`, `ID_GROUP`, `QUESTION`, `INFO`, `IS_MUST_HAVE_ANSWER`, `IS_MULTI_ANSWER`, `ID_LEVEL`, `DT_INSERT`, `DT_MODIFIED`) VALUES
(1, 1, 'Что для вас важно при выборе квартиры (поставьте балл от 1 до 10)?', NULL, 0, 1, 1, '2019-01-16 22:32:34', '2019-03-03 10:27:54'),
(2, 1, 'Важен ли фактор близости к работе?', NULL, 0, 0, 1, '2019-01-16 23:11:46', '2019-03-03 10:28:00'),
(3, 1, 'За какую сумму вы планируете приобрести квартиру?', NULL, 0, 0, 1, '2019-01-16 23:12:48', '2019-03-03 10:28:03'),
(4, 1, 'Нуждаетесь ли вы в привлечении ипотечного кредита?', NULL, 0, 0, 2, '2019-01-16 23:14:26', '2019-03-03 10:28:06'),
(5, 1, 'Важно ли для вас сопровождение риэлтора?', NULL, 0, 0, 2, '2019-01-16 23:15:13', '2019-03-03 10:28:09'),
(6, 1, 'Какое максимальное время вы готовы уделить поиску квартиры?', NULL, 0, 0, 3, '2019-01-16 23:15:51', '2019-03-03 10:28:12'),
(7, 1, 'Какие еще требования вы предъявляете к квартире?', NULL, 0, 0, 3, '2019-01-17 22:55:05', '2019-03-03 10:28:14'),
(8, 1, 'Вопрос 1', NULL, 0, 0, 0, '2019-01-22 22:41:50', '2019-02-25 23:00:42'),
(9, 1, 'Вопрос 11', NULL, 0, 0, 0, '2019-01-26 21:14:28', '2019-02-25 23:00:42'),
(10, 1, 'Вопрос 12', NULL, 0, 0, 0, '2019-01-26 21:14:48', '2019-02-25 23:00:42'),
(11, 1, 'Вопрос 111', NULL, 0, 0, 0, '2019-01-26 22:53:50', '2019-02-25 23:00:42'),
(12, 1, 'Вопрос 112', NULL, 0, 0, 0, '2019-01-26 22:53:57', '2019-02-25 23:00:42'),
(13, 1, 'Вопрос 113', NULL, 0, 0, 0, '2019-01-26 22:54:10', '2019-02-25 23:00:42'),
(14, 1, 'Вопрос 121', NULL, 0, 0, 0, '2019-01-26 22:54:33', '2019-02-25 23:00:42'),
(15, 1, 'Вопрос 122', NULL, 0, 0, 0, '2019-01-26 22:55:18', '2019-02-25 23:00:42'),
(16, 1, 'Вопрос 1211', NULL, 0, 0, 0, '2019-01-26 22:55:37', '2019-02-25 23:00:42'),
(17, 1, 'Вопрос 1212', NULL, 0, 0, 0, '2019-01-26 22:55:51', '2019-02-25 23:00:42'),
(18, 1, 'Вопрос 1213', NULL, 0, 0, 0, '2019-01-26 22:56:03', '2019-02-25 23:00:42'),
(19, 1, 'За какое время целесообразнее выбирать квартиру?', NULL, 0, 0, 0, '2019-02-11 23:08:09', '2019-02-25 23:00:42'),
(20, 1, 'Стоит ли смотреть на объявления \"Срочно продаю квартиру, нужны деньги\"?', NULL, 0, 0, 0, '2019-02-11 23:35:21', '2019-02-25 23:00:42'),
(21, 1, 'Обращаете ли вы внимание на шахту лифта, которая может располагаться рядом с квартирой?', NULL, 0, 0, 0, '2019-02-11 23:39:23', '2019-02-25 23:00:42'),
(22, 1, 'Не забываете ли вы осмотреть квартиру на наличие плесени?', NULL, 0, 0, 0, '2019-02-11 23:41:09', '2019-02-25 23:00:42'),
(23, 1, 'Что лучше по качеству: Брежневка из 80-х или современная новостройка?', NULL, 0, 0, 0, '2019-02-11 23:43:35', '2019-02-25 23:00:42'),
(24, 1, 'Обращаете ли внимание на парковочные места?', NULL, 0, 0, 0, '2019-02-17 23:34:29', '2019-02-25 23:00:42'),
(25, 1, 'Стоит ли смотреть квартиру с другом или лучше в одиночку?', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(26, 1, 'Как вы считаете, является ли квартира частью вашего имиджа?', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(27, 1, 'Обратили ли вы внимание на планировку района?', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(28, 1, 'Проверяете ли вы количество лет, в течение которых квартира была в собственности? ', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(29, 1, 'В какое время лучше осматривать квартиру?', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(30, 1, 'Нужно ли при покупке вторички проверять долю владения собственника?', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(31, 1, 'Знаете ли вы, какая сторона у квартиры считается самой \"худшей\"? ', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(32, 1, 'Как вы думаете, что важнее для большинства: потребительские характеристики или собственные эмоции при покупке новой квартиры? ', NULL, 0, 0, 0, '2019-02-17 23:48:50', '2019-02-25 23:00:42'),
(33, 1, 'Знаете ли вы, как проверить тягу в вентиляционном коробе?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(34, 1, 'Какая высота потолка считается хорошей?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(35, 1, 'Какая лицевая отделка дома самая худшая?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(36, 1, 'Наилучшими для покупки квартиры считаются этажи:', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(37, 1, 'Знаете ли вы, как проверить, делал ли предыдущий хозяин перепланировку? ', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(38, 1, 'Могут ли претендовать на квартиру прописанные в ней третьи лица, если вы уже приобрели ее в собственность?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(39, 1, 'Что лучше: небольшая и функциональная квартира или квартира со свободными неиспользуемыми метрами?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(40, 1, 'Входит ли разводка электричества в черновую отделку новостройки?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(41, 1, 'Стоит ли покупать квартиру в бывшем долгострое?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(42, 1, 'Насколько быстро человек привыкает к новой квартире?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(43, 1, 'На сколько процентов увеличивается стоимость жилья после ввода?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(44, 1, 'Вредно ли жить в километре от ТЭЦ?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(45, 1, 'Что хуже для экологии района: транспорт или ТЭЦ?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(46, 1, 'Больше всего производств в Москве расположено на:', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(47, 1, 'Есть ли отличие у слов \"Свалка\" и \"Полигон ТБО\" (когда вы присматриваете район)?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:04:25'),
(48, 1, 'Отличается ли качество воды в разных районах и соответствует ли оно нормативам?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42'),
(49, 1, 'Насколько дороже экологически чистые районы по отношению к загрязненным?', NULL, 0, 0, 0, '2019-02-17 23:48:51', '2019-02-25 23:00:42');

-- --------------------------------------------------------

--
-- Структура таблицы `spr_question_group`
--

CREATE TABLE `spr_question_group` (
  `ID` int(11) NOT NULL,
  `GROUP_NAME` varchar(256) NOT NULL,
  `DT_INSERT` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_question_group`
--

INSERT INTO `spr_question_group` (`ID`, `GROUP_NAME`, `DT_INSERT`, `DT_MODIFIED`) VALUES
(1, 'Общие', '2019-01-16 19:28:52', '0000-00-00 00:00:00');

-- --------------------------------------------------------

--
-- Структура таблицы `spr_question_tree`
--

CREATE TABLE `spr_question_tree` (
  `ID` int(11) NOT NULL,
  `ID_TREE` int(11) NOT NULL,
  `ID_PARENT` int(11) DEFAULT NULL COMMENT 'Ссылка на родительский вопрос',
  `ID_CHILD` int(11) DEFAULT NULL COMMENT 'Ссылка на дочерний ответ',
  `ID_ASWER_BRANCH` int(11) DEFAULT NULL COMMENT 'id выбранного ответа по которому попадаем в эту ветку вопросов',
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_question_tree`
--

INSERT INTO `spr_question_tree` (`ID`, `ID_TREE`, `ID_PARENT`, `ID_CHILD`, `ID_ASWER_BRANCH`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 1, NULL, 1, NULL, '2019-01-16 23:19:36', '2019-01-26 15:21:28'),
(2, 1, 1, 2, NULL, '2019-01-16 23:20:01', '2019-01-26 15:21:35'),
(3, 1, 2, 3, NULL, '2019-01-16 23:20:15', '2019-01-26 15:21:41'),
(4, 1, 3, 4, NULL, '2019-01-16 23:20:31', '2019-01-26 15:21:46'),
(5, 1, 4, 5, NULL, '2019-01-16 23:20:39', '2019-01-26 15:21:53'),
(6, 1, 5, 6, NULL, '2019-01-17 23:04:27', '2019-01-26 15:22:13'),
(11, 1, 6, 7, NULL, '2019-01-26 15:22:36', NULL),
(20, 2, NULL, 8, NULL, '2019-01-26 22:57:24', NULL),
(21, 2, 8, 9, 5, '2019-01-26 22:58:06', '2019-01-26 23:03:09'),
(22, 2, 8, 10, 6, '2019-01-26 22:58:18', '2019-01-26 23:03:11'),
(23, 2, 9, 11, 5, '2019-01-26 22:59:02', '2019-01-26 23:35:18'),
(24, 2, 11, 12, NULL, '2019-01-26 22:59:27', '2019-01-26 23:49:13'),
(25, 2, 12, 13, NULL, '2019-01-26 22:59:44', '2019-01-26 23:49:17'),
(26, 2, 10, 14, 5, '2019-01-26 23:01:29', '2019-01-26 23:04:56'),
(27, 2, 10, 15, 6, '2019-01-26 23:04:40', '2019-01-26 23:04:58'),
(28, 2, 14, 16, 5, '2019-01-26 23:05:30', NULL),
(29, 2, 14, 17, 6, '2019-01-26 23:05:42', NULL),
(30, 2, 14, 18, NULL, '2019-01-26 23:06:03', NULL),
(31, 3, NULL, 19, NULL, '2019-02-11 23:23:09', NULL),
(32, 3, 19, 20, NULL, '2019-02-25 23:07:03', NULL),
(33, 3, 20, 21, NULL, '2019-02-25 23:07:14', NULL),
(34, 3, 21, 22, NULL, '2019-02-25 23:07:23', NULL),
(35, 3, 22, 23, NULL, '2019-02-25 23:07:31', NULL),
(36, 3, 23, 24, NULL, '2019-02-25 23:07:40', NULL),
(37, 3, 24, 25, NULL, '2019-02-25 23:07:50', NULL),
(38, 3, 25, 26, NULL, '2019-02-25 23:07:57', NULL),
(39, 3, 26, 27, NULL, '2019-02-25 23:08:26', NULL),
(40, 3, 27, 28, NULL, '2019-02-25 23:08:46', NULL),
(41, 3, 28, 29, NULL, '2019-02-25 23:08:55', NULL),
(42, 3, 29, 30, NULL, '2019-02-25 23:09:05', NULL),
(43, 3, 30, 31, NULL, '2019-02-25 23:09:13', NULL),
(44, 3, 31, 32, NULL, '2019-02-25 23:09:22', NULL),
(45, 3, 32, 33, NULL, '2019-02-25 23:09:30', NULL),
(46, 3, 33, 34, NULL, '2019-02-25 23:09:39', NULL),
(47, 3, 34, 35, NULL, '2019-02-25 23:09:54', NULL),
(48, 3, 35, 36, NULL, '2019-02-25 23:10:01', NULL),
(49, 3, 36, 37, NULL, '2019-02-25 23:10:10', NULL),
(50, 3, 37, 38, NULL, '2019-02-25 23:10:19', NULL),
(51, 3, 38, 39, NULL, '2019-02-25 23:10:27', NULL),
(52, 3, 39, 40, NULL, '2019-02-25 23:10:36', NULL),
(53, 3, 41, 42, NULL, '2019-02-25 23:10:48', NULL),
(54, 3, 42, 43, NULL, '2019-02-25 23:10:56', NULL),
(55, 3, 43, 44, NULL, '2019-02-25 23:11:04', NULL),
(56, 3, 44, 45, NULL, '2019-02-25 23:11:14', NULL),
(57, 3, 45, 46, NULL, '2019-02-25 23:11:21', NULL),
(58, 3, 46, 47, NULL, '2019-02-25 23:11:33', NULL),
(59, 3, 47, 48, NULL, '2019-02-25 23:11:42', NULL),
(61, 3, 48, 49, NULL, '2019-02-25 23:12:04', '2019-02-25 23:13:05'),
(62, 3, 49, NULL, NULL, '2019-02-25 23:13:18', NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `spr_tree`
--

CREATE TABLE `spr_tree` (
  `ID` int(11) NOT NULL,
  `TREE_NAME` varchar(256) NOT NULL,
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `spr_tree`
--

INSERT INTO `spr_tree` (`ID`, `TREE_NAME`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 'Основное', '2019-01-16 23:16:39', '0000-00-00 00:00:00'),
(2, 'Тестовое', '2019-01-22 22:56:13', NULL),
(3, 'Основное 2', '2019-02-11 23:22:32', NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `usr_answer`
--

CREATE TABLE `usr_answer` (
  `ID` int(11) NOT NULL,
  `ID_USER` int(11) NOT NULL,
  `ID_QUESTION` int(11) NOT NULL,
  `ID_ANSWER` int(11) NOT NULL,
  `INFO` varchar(1024) DEFAULT NULL,
  `SCALE_VALUE` smallint(6) DEFAULT NULL COMMENT 'значение шкалы',
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `usr_answer`
--

INSERT INTO `usr_answer` (`ID`, `ID_USER`, `ID_QUESTION`, `ID_ANSWER`, `INFO`, `SCALE_VALUE`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, 1, 1, 3, NULL, 5, '2019-01-17 00:23:40', NULL),
(2, 1, 2, 6, NULL, NULL, '2019-01-17 00:24:07', NULL),
(3, 1, 7, 19, 'высокие потолки', NULL, '2019-01-17 22:59:16', NULL);

-- --------------------------------------------------------

--
-- Структура таблицы `usr_login`
--

CREATE TABLE `usr_login` (
  `ID` int(11) NOT NULL,
  `USER_ID` varchar(255) DEFAULT NULL COMMENT 'технический идентифкатор неавторизованного юзера',
  `LOGIN` varchar(255) DEFAULT NULL,
  `FIO` varchar(255) DEFAULT NULL,
  `PSW` varchar(255) DEFAULT NULL,
  `LAST_SESSION_ID` varchar(256) DEFAULT NULL,
  `LAST_SESSION_DT` datetime DEFAULT NULL,
  `LAST_SESSION_DEVICE` varchar(255) DEFAULT NULL,
  `LAST_SESSION_GPS` varchar(255) DEFAULT NULL,
  `DT_INSERTED` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DT_MODIFIED` datetime DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- Дамп данных таблицы `usr_login`
--

INSERT INTO `usr_login` (`ID`, `USER_ID`, `LOGIN`, `FIO`, `PSW`, `LAST_SESSION_ID`, `LAST_SESSION_DT`, `LAST_SESSION_DEVICE`, `LAST_SESSION_GPS`, `DT_INSERTED`, `DT_MODIFIED`) VALUES
(1, NULL, 'user1', NULL, NULL, '1234567890', NULL, NULL, NULL, '2019-01-17 00:20:50', '2019-01-22 23:18:54');

--
-- Индексы сохранённых таблиц
--

--
-- Индексы таблицы `spr_answer`
--
ALTER TABLE `spr_answer`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `IX_ANSWER_GROUP_UNIQ` (`ID_GROUP`,`ANSWER`(255),`DT_MODIFIED`),
  ADD KEY `IX_ANSWER_UNIQ` (`ID_GROUP`,`ANSWER`(255));

--
-- Индексы таблицы `spr_answer_group`
--
ALTER TABLE `spr_answer_group`
  ADD PRIMARY KEY (`ID`);

--
-- Индексы таблицы `spr_answer_question`
--
ALTER TABLE `spr_answer_question`
  ADD UNIQUE KEY `IX_QUESTION_ANSWER_UNIQ` (`ID_QUESTION`,`ID_ANSWER`),
  ADD KEY `FK_ANSWER` (`ID_ANSWER`),
  ADD KEY `IX_ANSWER_QUESTION` (`ID_QUESTION`,`ID_ANSWER`),
  ADD KEY `IX_SHOW_INDEX` (`SHOW_INDEX`);

--
-- Индексы таблицы `spr_question`
--
ALTER TABLE `spr_question`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `IX_QUESTION_UNIQ` (`ID_GROUP`,`QUESTION`(255));

--
-- Индексы таблицы `spr_question_group`
--
ALTER TABLE `spr_question_group`
  ADD PRIMARY KEY (`ID`);

--
-- Индексы таблицы `spr_question_tree`
--
ALTER TABLE `spr_question_tree`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `FK_QUESTION_PARENT` (`ID_PARENT`),
  ADD KEY `FK_QUESTION_CHILD` (`ID_CHILD`),
  ADD KEY `FK_TREE` (`ID_TREE`),
  ADD KEY `FK_ANSWER_BRANCH_ID` (`ID_ASWER_BRANCH`);

--
-- Индексы таблицы `spr_tree`
--
ALTER TABLE `spr_tree`
  ADD PRIMARY KEY (`ID`);

--
-- Индексы таблицы `usr_answer`
--
ALTER TABLE `usr_answer`
  ADD PRIMARY KEY (`ID`),
  ADD KEY `FK_USER_ID` (`ID_USER`),
  ADD KEY `FK_QUESTION_ID` (`ID_QUESTION`),
  ADD KEY `FK_ANSWER_ID` (`ID_ANSWER`);

--
-- Индексы таблицы `usr_login`
--
ALTER TABLE `usr_login`
  ADD PRIMARY KEY (`ID`);

--
-- AUTO_INCREMENT для сохранённых таблиц
--

--
-- AUTO_INCREMENT для таблицы `spr_answer`
--
ALTER TABLE `spr_answer`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=75;

--
-- AUTO_INCREMENT для таблицы `spr_answer_group`
--
ALTER TABLE `spr_answer_group`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT для таблицы `spr_question`
--
ALTER TABLE `spr_question`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=50;

--
-- AUTO_INCREMENT для таблицы `spr_question_group`
--
ALTER TABLE `spr_question_group`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT для таблицы `spr_question_tree`
--
ALTER TABLE `spr_question_tree`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=63;

--
-- AUTO_INCREMENT для таблицы `spr_tree`
--
ALTER TABLE `spr_tree`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT для таблицы `usr_answer`
--
ALTER TABLE `usr_answer`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=4;

--
-- AUTO_INCREMENT для таблицы `usr_login`
--
ALTER TABLE `usr_login`
  MODIFY `ID` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- Ограничения внешнего ключа сохраненных таблиц
--

--
-- Ограничения внешнего ключа таблицы `spr_answer`
--
ALTER TABLE `spr_answer`
  ADD CONSTRAINT `FK_ANSWER_GROUP` FOREIGN KEY (`ID_GROUP`) REFERENCES `spr_answer_group` (`ID`);

--
-- Ограничения внешнего ключа таблицы `spr_answer_question`
--
ALTER TABLE `spr_answer_question`
  ADD CONSTRAINT `FK_ANSWER` FOREIGN KEY (`ID_ANSWER`) REFERENCES `spr_answer` (`ID`),
  ADD CONSTRAINT `FK_QUESTION` FOREIGN KEY (`ID_QUESTION`) REFERENCES `spr_question` (`ID`);

--
-- Ограничения внешнего ключа таблицы `spr_question`
--
ALTER TABLE `spr_question`
  ADD CONSTRAINT `FK_QUESTION_GROUP` FOREIGN KEY (`ID_GROUP`) REFERENCES `spr_question_group` (`ID`);

--
-- Ограничения внешнего ключа таблицы `spr_question_tree`
--
ALTER TABLE `spr_question_tree`
  ADD CONSTRAINT `FK_ANSWER_BRANCH_ID` FOREIGN KEY (`ID_ASWER_BRANCH`) REFERENCES `spr_answer` (`ID`),
  ADD CONSTRAINT `FK_QUESTION_CHILD` FOREIGN KEY (`ID_CHILD`) REFERENCES `spr_question` (`ID`),
  ADD CONSTRAINT `FK_QUESTION_PARENT` FOREIGN KEY (`ID_PARENT`) REFERENCES `spr_question` (`ID`),
  ADD CONSTRAINT `FK_TREE` FOREIGN KEY (`ID_TREE`) REFERENCES `spr_tree` (`ID`);

--
-- Ограничения внешнего ключа таблицы `usr_answer`
--
ALTER TABLE `usr_answer`
  ADD CONSTRAINT `FK_ANSWER_ID` FOREIGN KEY (`ID_ANSWER`) REFERENCES `spr_answer` (`ID`),
  ADD CONSTRAINT `FK_QUESTION_ID` FOREIGN KEY (`ID_QUESTION`) REFERENCES `spr_question` (`ID`),
  ADD CONSTRAINT `FK_USER_ID` FOREIGN KEY (`ID_USER`) REFERENCES `usr_login` (`ID`);
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
